<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>DevBlog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="DevBlog">
<meta property="og:url" content="https://ysg00.github.io/devblog/index.html">
<meta property="og:site_name" content="DevBlog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Hang Yu">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/devblog/atom.xml" title="DevBlog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/devblog/css/style.css">

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/devblog/" id="logo">DevBlog</a>
      </h1>
    </div>
    <div id="header-inner" class="inner">
      <nav id="nav">
        <a id="nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/devblog/">Home</a>
        
          <a class="main-nav-link" href="/devblog/archives">Archives</a>
        
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://ysg00.github.io/devblog"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-Mock-Fully-Functional-Api-Endpoint-For-React-App-Using-Json-Server" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/devblog/2020/01/08/Mock-Fully-Functional-Api-Endpoint-For-React-App-Using-Json-Server/" class="article-date">
  <time datetime="2020-01-09T03:37:39.000Z" itemprop="datePublished">2020-01-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/devblog/2020/01/08/Mock-Fully-Functional-Api-Endpoint-For-React-App-Using-Json-Server/">Mock Fully Functional Api Endpoint For React App Using Json-Server</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Use <a href="https://github.com/typicode/json-server" target="_blank" rel="noopener">json-server</a> to mock Api endpoints.</p>
<p>When doing frontend or full-stack development, it is painful to build the frontend without a stable backend. That is what I have been through these couple days. So, I found some interesting package to mock a simple api and backend db using <code>json-server</code>, together with some react environment management package <code>env-cmd</code>.</p>
<h2 id="Install-Packages"><a href="#Install-Packages" class="headerlink" title="Install Packages"></a>Install Packages</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install json-server</span><br><span class="line">npm install env-cmd</span><br></pre></td></tr></table></figure>

<p>Add <code>-g</code> to make package accessible globally.</p>
<h2 id="Setup-React-Environment"><a href="#Setup-React-Environment" class="headerlink" title="Setup React Environment"></a>Setup React Environment</h2><p>It is crutial to have environment variables in react app when you not have a stable backend, so that some variable like <code>API_URL</code> can be changed on different builds. React use .env file to specify common env variables on all builds. <code>create-react-app</code> would not create this kind files  by default. Also with <code>create-react-app</code>, all env variable declared must prefixed with <code>REACT_APP_</code>.</p>
<p>When execute <code>npm start</code>, it automatically read the env variables declared in .env and .env.development if these files exist. In most of the cases I have the real <code>API_URL</code> in <code>npm start</code> build. So we need to create a new .env file, for example .env.mock</p>
<p>Then inside <code>&quot;scripts&quot;</code> section in  <code>package.json</code></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">...... </span><br><span class="line">  "scripts": &#123;</span><br><span class="line">    "start": "react-scripts start",</span><br><span class="line">    "build": "react-scripts build",</span><br><span class="line">    ......</span><br><span class="line">  &#125;,</span><br><span class="line">......</span><br></pre></td></tr></table></figure>

<p>add the following line</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">"mock": "env-cmd -f .env.mock react-scripts start"</span><br></pre></td></tr></table></figure>

<p><code>env-cmd</code> gives the ability of setting customized environment in react.</p>
<p>After that, do</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run mock</span><br></pre></td></tr></table></figure>

<p>This will start the react app normally with the evn variables specified inside <code>.env.mock</code>. </p>
<h2 id="Setup-Json-Server"><a href="#Setup-Json-Server" class="headerlink" title="Setup Json Server"></a>Setup Json Server</h2><p>Create a <code>db.json</code>  file in the react project root directory with some data</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"posts"</span>: [</span><br><span class="line">    &#123; <span class="attr">"id"</span>: <span class="number">1</span>, <span class="attr">"title"</span>: <span class="string">"json-server"</span>, <span class="attr">"author"</span>: <span class="string">"hangyu"</span> &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">"comments"</span>: [</span><br><span class="line">    &#123; <span class="attr">"id"</span>: <span class="number">1</span>, <span class="attr">"body"</span>: <span class="string">"some comment"</span>, <span class="attr">"postId"</span>: <span class="number">1</span> &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">"profile"</span>: &#123; <span class="attr">"name"</span>: <span class="string">"hangyu"</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>If you install <code>json-server</code> globally, you can start it by doing</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">json-server --watch db.json --port 4000</span><br></pre></td></tr></table></figure>

<p>By default it takes port 3000, which is the same default port as react app. </p>
<p>Then if you go to <a href="http://localhost:4000/posts" target="_blank" rel="noopener">http://localhost:4000/posts</a></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&#123; <span class="attr">"id"</span>: <span class="number">1</span>, <span class="attr">"title"</span>: <span class="string">"json-server"</span>, <span class="attr">"author"</span>: <span class="string">"hangyu"</span>&#125;]</span><br></pre></td></tr></table></figure>

<p>if you go to <a href="http://localhost:4000/posts/1" target="_blank" rel="noopener">http://localhost:4000/posts/1</a></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="attr">"id"</span>: <span class="number">1</span>, <span class="attr">"title"</span>: <span class="string">"json-server"</span>, <span class="attr">"author"</span>: <span class="string">"hangyu"</span>&#125;</span><br></pre></td></tr></table></figure>

<p>If you make POST, PUT, PATCH or DELETE requests, changes will be automatically saved to <code>db.json</code>using <a href="https://github.com/typicode/lowdb" target="_blank" rel="noopener">lowdb</a> . And id values are not mutable. Any <code>id</code> value in the body of your PUT or PATCH request will be ignored. Only a value set in a POST request will be respected, but only if not already taken.</p>
<p>It also supports custimized route and response content or configure it more in a javascript, which I will study more in the future. This is temporarily enough for a mock Api.</p>
<p>To let it work in the react app, add another line in the<code>&quot;scripts&quot;</code> section in  <code>package.json</code></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">"mock:server": "json-server --watch db.json --port 4000"</span><br></pre></td></tr></table></figure>

<p>then </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run mock:server</span><br></pre></td></tr></table></figure>

<p>Now the <code>json-server</code> is running, you need to start another terminal to run <code>npm start mock</code>.</p>
<p>If you want to combined these two processes, delete those two lines added to <code>package.json</code> and add</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">"start:mock": "node server_mock/mockServer.js | env-cmd -f .env.mock react-scripts start"</span><br></pre></td></tr></table></figure>

<p>This works the samo sa bash pipeline processes.</p>
<h2 id="Wrap-Up"><a href="#Wrap-Up" class="headerlink" title="Wrap Up"></a>Wrap Up</h2><p>With that we can easily mock a backend and api endpoints for frontend. Define your real api endpoint address <code>REACT_APP_API_URL=&lt;your api deployed address&gt;</code> in <code>.env.development</code> and <code>REACT_APP_API_URL=http://localhost:4000</code> for mock api endpoints. You can access them in the <code>ApiClient</code> code by using <code>process.env.REACT_APP_API_URL</code>. It is better to wrap it in another level of abstraction so it can be easily mocked in a unit-test.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ysg00.github.io/devblog/2020/01/08/Mock-Fully-Functional-Api-Endpoint-For-React-App-Using-Json-Server/" data-id="ck566rfz4000008k2aq0ffj2n" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/devblog/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/devblog/tags/React/" rel="tag">React</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Build-Personal-Blog-Site-With-Hexo" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/devblog/2020/01/05/Build-Personal-Blog-Site-With-Hexo/" class="article-date">
  <time datetime="2020-01-05T06:56:59.913Z" itemprop="datePublished">2020-01-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/devblog/2020/01/05/Build-Personal-Blog-Site-With-Hexo/">Build Personal Blog Site With Hexo</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>A blog is useful for many reason, especially for developers who learn new things everyday. It could be a secret place to keep all your knowledge, and also could be a way to demonstrate someone’s abilities on various subjects. So I decided to have one myself start from 2020. </p>
<p>Nowadays, you can easily find frameworks that help you to build a simple static website. I found Hexo is simple and fit my needs. Here is a basic summary of setting up a static website using Hexo.</p>
<h2 id="What-Is-Hexo"><a href="#What-Is-Hexo" class="headerlink" title="What Is Hexo"></a>What Is Hexo</h2><p><a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> is <em>a fast, simple &amp; powerful blog framework</em>, and works as a static site generator. Once the basic framework and theme are set up, it renders all article as different posts on the web with format specified in the theme. Although it sounds simple, the extensibility powered by plugins could give you a strong and responsive website.</p>
<h2 id="Getting-Start"><a href="#Getting-Start" class="headerlink" title="Getting Start"></a>Getting Start</h2><h3 id="Install-Hexo"><a href="#Install-Hexo" class="headerlink" title="Install Hexo"></a>Install Hexo</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br></pre></td></tr></table></figure>

<p>Node.js is required. The -g flag will give access to hexo globally on command line.</p>
<h3 id="Create-Hexo-Website"><a href="#Create-Hexo-Website" class="headerlink" title="Create Hexo Website"></a>Create Hexo Website</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo init myblog</span><br><span class="line"><span class="built_in">cd</span> myblog</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>

<p>Once initialized, here’s what your project folder will look like:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">myblog</span><br><span class="line">├── _config.yml</span><br><span class="line">├── package.json</span><br><span class="line">├── scaffolds</span><br><span class="line">├── source</span><br><span class="line">|   ├── _drafts</span><br><span class="line">|   └── _posts</span><br><span class="line">└── themes</span><br></pre></td></tr></table></figure>

<h4 id="config-yml"><a href="#config-yml" class="headerlink" title="_config.yml"></a>_config.yml</h4><p>Site <a href="https://hexo.io/docs/configuration" target="_blank" rel="noopener">configuration</a> file. You can configure most settings here.</p>
<h4 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h4><p>Application data. It tells npm what package to install. The <code>npm install</code> command installs all packaged specified in this file.</p>
<h4 id="scaffolds"><a href="#scaffolds" class="headerlink" title="scaffolds"></a>scaffolds</h4><p><a href="https://hexo.io/docs/writing#Scaffolds" target="_blank" rel="noopener">Scaffold</a> folder. When you create a new post, Hexo bases the new file on the scaffold.</p>
<h4 id="source"><a href="#source" class="headerlink" title="source"></a>source</h4><p>Source folder. This is where you put your site’s content. Hexo ignores hidden  files and files or folders whose names are prefixed with <code>_</code> (underscore) - except the <code>_posts</code> folder. Renderable files (e.g. Markdown, HTML) will be processed and put into the <code>public</code> folder, while other files will simply be copied.</p>
<h4 id="themes"><a href="#themes" class="headerlink" title="themes"></a>themes</h4><p><a href="https://hexo.io/docs/themes" target="_blank" rel="noopener">Theme</a> folder. Hexo generates a static website by combining the site contents with the theme. It uses a default theme ‘landscape’, which contains pretty much everything I need for a blog site. You can make some changes to it or create your own theme if you do not like this one.</p>
<h3 id="Run-Hexo-Server-Locally"><a href="#Run-Hexo-Server-Locally" class="headerlink" title="Run Hexo Server Locally"></a>Run Hexo Server Locally</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo server</span><br></pre></td></tr></table></figure>

<p>By default, this is hosted at <code>http://localhost:4000/</code>, and you will see a page like this.</p>
<img src="/devblog/2020/01/05/Build-Personal-Blog-Site-With-Hexo/hexo_init.png" class="" width="500" title="hexo init">

<h3 id="Create-New-Posts"><a href="#Create-New-Posts" class="headerlink" title="Create New Posts"></a>Create New Posts</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new [layout] <span class="string">'file name'</span></span><br></pre></td></tr></table></figure>

<p>It basically creates a new markdown file <code>file-name.md</code> in <code>source/_post</code> with basic format specified in <code>scaffolds/post.md</code>, and it will rendered to the website. <code>post</code> is the default <code>layout</code>, but you can supply your own. You can change the default layout by editing the <code>default_layout</code> setting in <code>_config.yml</code>. If you need to create an article that is not rendered immediately, simply use <code>draft</code> for <code>layout</code>.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new draft <span class="string">'file name'</span></span><br></pre></td></tr></table></figure>

<p>Later if you need to publish the article, do</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo publish draft <span class="string">'file name'</span></span><br></pre></td></tr></table></figure>

<p>Refresh the page and the new article will be posted on the website.</p>
<h2 id="Next-Step"><a href="#Next-Step" class="headerlink" title="Next Step"></a>Next Step</h2><p>We should already get a basic website running on localhost at this point. The next step will be figuring out how to actually make this website live so that it is visible on the internet. Also </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ysg00.github.io/devblog/2020/01/05/Build-Personal-Blog-Site-With-Hexo/" data-id="ck566rfzf000108k24u9kfui7" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/devblog/tags/Hexo/" rel="tag">Hexo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/devblog/tags/JavaScript/" rel="tag">JavaScript</a></li></ul>

    </footer>
  </div>
  
</article>


  


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">recent_updates</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/devblog/2020/01/08/Mock-Fully-Functional-Api-Endpoint-For-React-App-Using-Json-Server/">Mock Fully Functional Api Endpoint For React App Using Json-Server</a>
          </li>
        
          <li>
            <a href="/devblog/2020/01/05/Build-Personal-Blog-Site-With-Hexo/">Build Personal Blog Site With Hexo</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/devblog/tags/Hexo/" rel="tag">Hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/devblog/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/devblog/tags/React/" rel="tag">React</a></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 Hang Yu<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/devblog/" class="mobile-nav-link">Home</a>
  
    <a href="/devblog/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/devblog/fancybox/jquery.fancybox.css">

  
<script src="/devblog/fancybox/jquery.fancybox.pack.js"></script>




<script src="/devblog/js/script.js"></script>




  </div>
</body>
</html>